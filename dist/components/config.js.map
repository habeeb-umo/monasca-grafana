{"version":3,"sources":["../../src/components/config.js"],"names":["MonascaAppConfigCtrl","backendSrv","datasources","appModel","jsonData","show_types","get","then","console","log","response","filter","indexOf","ds","type","map","name","datasourceName","length","catch","err","templateUrl"],"mappings":";;;;;;;;;;;;;;;;sCAgBaA,oB,GACX,8BAAYC,UAAZ,EAAwB;AAAA;;AAAA;;AACtB,aAAKC,WAAL,GAAmB,EAAnB;AACA,YAAI,CAAC,KAAKC,QAAL,CAAcC,QAAnB,EAA6B;AAC3B,eAAKD,QAAL,CAAcC,QAAd,GAAyB,EAAzB;AACD;;AAED,YAAIC,aAAa,CAAC,4BAAD,EAA+B,oBAA/B,CAAjB;;AAEAJ,mBAAWK,GAAX,CAAe,kBAAf,EACGC,IADH,CACQ,oBAAY;AACvBC,kBAAQC,GAAR,CAAYC,QAAZ;AACA,gBAAKR,WAAL,GAAmBQ,SAChBC,MADgB,CACT;AAAA,mBAAMN,WAAWO,OAAX,CAAmBC,GAAGC,IAAtB,KAA+B,CAArC;AAAA,WADS,EAEhBC,GAFgB,CAEZ;AAAA,mBAAMF,GAAGG,IAAT;AAAA,WAFY,CAAnB;;AAIA;AACA,cAAI,CAAC,MAAKb,QAAL,CAAcC,QAAd,CAAuBa,cAAxB,IAA0C,MAAKf,WAAL,CAAiBgB,MAAjB,GAA0B,CAAxE,EAA2E;AACzE,kBAAKf,QAAL,CAAcC,QAAd,CAAuBa,cAAvB,GAAwC,MAAKf,WAAL,CAAiB,CAAjB,CAAxC;AACD;AACK,SAXH,EAYGiB,KAZH,CAYS,eAAO;AAAE,gBAAMC,GAAN;AAAY,SAZ9B;AAaD,O;;;;AAEHpB,2BAAqBqB,WAArB,GAAmC,wBAAnC","file":"config.js","sourcesContent":["/*\n *   Copyright 2017 StackHPC\n *\n *   Licensed under the Apache License, Version 2.0 (the \"License\");\n *   you may not use this file except in compliance with the License.\n *   You may obtain a copy of the License at\n *\n *       http://www.apache.org/licenses/LICENSE-2.0\n *\n *   Unless required by applicable law or agreed to in writing, software\n *   distributed under the License is distributed on an \"AS IS\" BASIS,\n *   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *   See the License for the specific language governing permissions and\n *   limitations under the License.\n */\n\nexport class MonascaAppConfigCtrl {\n  constructor(backendSrv) {\n    this.datasources = [];\n    if (!this.appModel.jsonData) {\n      this.appModel.jsonData = {};\n    }\n\n    var show_types = ['monasca-grafana-datasource', 'monasca-datasource'];\n\n    backendSrv.get('/api/datasources')\n      .then(response => {\n\tconsole.log(response);\n\tthis.datasources = response\n\t  .filter(ds => show_types.indexOf(ds.type) >= 0)\n\t  .map(ds => ds.name);\n\n\t// If a datasource has not been selected yet, choose the first one.\n\tif (!this.appModel.jsonData.datasourceName && this.datasources.length > 0) {\n\t  this.appModel.jsonData.datasourceName = this.datasources[0];\n\t}\n      })\n      .catch(err => { throw err; });\n  }\n}\nMonascaAppConfigCtrl.templateUrl = 'components/config.html';\n"]}